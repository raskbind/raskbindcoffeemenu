<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" type="x-icon" href="image/image2.png">
    <title>Raskbind Coffee</title>

    <!-- SWIPER -->
    <link rel="stylesheet" href="https://unpkg.com/swiper@7/swiper-bundle.min.css" />

    <!-- Font Awesome CDN Link  -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

    <!-- Custom CSS File Link  -->
    <link rel="stylesheet" href="css/style.css">

</head>
<body>

  <section class="book" id="book">
    <h1 class="heading">booking <span>reserve a table</span></h1>

    <form name="submit-to-google-sheet" action="">
        <input name="Name" type="text" placeholder="Name" class="box">
        <input name="Tableno" type="text" placeholder="Table no." class="box">
        <input name="Price" type="text" placeholder="Price" value="299.00" class="box1">
        <input name="Quantity" type="number" placeholder="Quantity" class="box">
        <input style="display: none;" name="Product name" type="text" placeholder="Product name" value="coldbrew" class="box">
        <textarea name="Message" placeholder="Message" class="box" id="" cols="30" rows="10"></textarea>
        <div class="date">
        <input type="text" name="DateTime" placeholder="Date and Time" class="box" id="datetime" style="display: none;" readonly>
        </div>
        <input type="submit" value="Confirm" class="btn">
    </form>
</section>

<script>
    // Function to get current date and time
    function getCurrentDateTime() {
        var now = new Date();
        var date = now.toDateString();
        var time = now.toLocaleTimeString();

        return date + ' ' + time;
    }

    // Populate the "DateTime" field with the current date and time and show it
    document.addEventListener('DOMContentLoaded', function() {
        var datetimeField = document.getElementById('datetime');
        if (datetimeField) {
            datetimeField.value = getCurrentDateTime();
            datetimeField.style.display = 'block';
        }
    });
</script>



    <div class="loading-spinner"></div>
      
      <style>
        .loading-spinner {
  display: none;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 9999;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  border: 5px solid #ccc;
  border-top-color: #0073b1;
  animation: spin 1s ease-in-out infinite;
}

.loading-spinner:before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  margin: auto;
  width: 30px;
  height: 30px;
  border-radius: 50%;
  border: 5px solid #ccc;
  border-top-color: #0073b1;
  animation: spin 1s ease-in-out infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.loading {
  opacity: 0.5;
  pointer-events: none;
}

      </style>

<script>
    const scriptURL = 'https://script.google.com/macros/s/AKfycbzQ9s76RpAn2JdEg55eNzEpebw01MRuhPYL4dtZZIgC_MbcYhz_pkCJOfSBtZvWatxs/exec'
 
const form = document.forms['submit-to-google-sheet'];
const spinner = document.querySelector('.loading-spinner');

form.addEventListener('submit', e => {
e.preventDefault();
form.classList.add('loading');
spinner.style.display = 'block';
fetch(scriptURL, { method: 'POST', body: new FormData(form)})
.then(response => {
  if (response.ok) {
    window.location.href = "submit.html";
  }
})
.catch(error => {
  alert("Submission failed. Please try again later.");
  console.error('Error:', error);
})
.finally(() => {
  form.classList.remove('loading');
  spinner.style.display = 'none';
});
})

  </script>

</body>
</html>